<% card_transaction = card_installment.card_transaction %>
<%= turbo_frame_tag dom_id card_installment do %>
  <tr id="card_installment_<%= card_installment.id %>" class="<%= card_transaction.categories&.first&.bg_colour || "bg-black" %> border-b hover:bg-white border-gray-200 font-semibold text-md text-black">
    <td class="w-4 p-4">
      <div class="flex items-center">
        <%= checkbox_tag :checkbox, false, false, id: "checkbox_#{card_installment.id}", class: "#{card_transaction.categories&.first&.bg_colour} border-gray-300 focus:ring-blue-500 focus:ring-2" %>
      </div>
    </td>
    <td class="px-6 py-4" style="width: 10%">
      <%= l card_installment.date, format: "%d %b %Y" %>
    </th>
    <th scope="row" class="px-6 py-4 whitespace-nowrap border-x border-gray-200 text-center">
      <%= card_transaction.description %>
      <% if card_installment.card_installments_count > 1 %>
        <span class="inline-flex items-center px-1 rounded-xs bg-white text-gray-800">
          <%= "#{card_installment.number}/#{card_installment.card_installments_count}" %>
        </span>
      <% end %>
    </td>
    <td class="px-6 py-4 border-x border-gray-200">
      <%= card_transaction.categories.pluck(:category_name).join(", ") %>
    </td>
    <td class="px-6 py-4 border-x border-gray-200">
      <%= card_transaction.entities.pluck(:entity_name).join(", ") %>
    </td>
    <th scope="row" class="px-6 py-4 font-mono whitespace-nowrap text-right">
      <%= from_cent_based_to_float(card_installment.price) %>
    </td>
    <th class="px-6 py-4 whitespace-nowrap border-x">
      <div class="flex items-center justify-between px-2 my-1 rounded-md bg-white">
        <%= link_to edit_card_transaction_path(card_transaction), id: "edit_card_transaction_#{card_transaction.id}", class: "text-blue-600", data: { turbo_frame: :center_container } do %>
          <%= render "shared/svgs/cog" %>
        <% end %>

        <%= link_to card_transaction, id: "delete_card_transaction_#{card_transaction.id}", class: "text-red-600", data: { turbo_method: :delete } do %>
          <%= render "shared/svgs/destroy" %>
        <% end %>
      </div>
    </td>
  </tr>
<% end %>
