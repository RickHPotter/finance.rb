<%= content_tag :div, class: "rounded-lg shadow-sm overflow-hidden my-3", data: { id: category.id, datatable_target: :row } do %>
  <%= content_tag :div, class: "p-4 bg-gradient-to-r #{category.from_bg} #{category.via_bg} to-white #{category.text_colour}" do %>
    <div class="flex items-center justify-between">
      <div class="flex items-center space-x-3">
        <%= render "shared/svgs/category" %>
        <%= content_tag :span, category.category_name, class: "text-lg font-semibold text-black" %>
      </div>
    </div>
  <% end %>

  <div class="p-4">
    <div class="grid grid-cols-2 gap-4 my-2">
      <div class="space-y-1">
        <%= link_to card_transactions_path(category_id: category.id, format: :turbo_stream), class: "flex items-center text-sm font-medium text-slate-500", data: { turbo_frame: :center_container } do %>
          <%= render "shared/svgs/number" %>
          <%= content_tag :span, pluralise_model(CardTransaction, 2), class: "ml-2" %>
        <% end  %>

        <div class="flex items-center">
          <%= content_tag :span, category.card_transactions_count, class: "text-sm font-semibold text-slate-800" %>
        </div>
      </div>

      <div class="space-y-1">
        <div class="flex items-center space-x-2">
          <%= render "shared/svgs/money" %>
          <%= content_tag :span, model_attribute(CardTransaction, :total_amount), class: "text-sm font-medium text-slate-500" %>
        </div>

        <div class="flex items-center">
          <%= content_tag :span, from_cent_based_to_float(category.card_transactions_total, "R$"), class: "text-sm font-semibold text-slate-800 mr-auto" %>

          <%= link_to card_transactions_path(category_id: category.id, format: :turbo_stream), class: "my-auto mt-[-1rem]", data: { turbo_frame: :center_container } do %>
            <%= render "shared/svgs/jump_to" %>
          <% end %>
        </div>
      </div>
    </div>

    <div class="grid grid-cols-2 gap-4 my-2">
      <div class="space-y-1">
        <%= link_to cash_transactions_path(category_id: category.id, format: :turbo_stream), class: "flex items-center text-sm font-medium text-slate-500", data: { turbo_frame: :center_container } do %>
          <%= render "shared/svgs/number" %>
          <%= content_tag :span, pluralise_model(CashTransaction, 2), class: "ml-2" %>
        <% end  %>

        <div class="flex items-center">
          <%= content_tag :span, category.cash_transactions_count, class: "text-sm font-semibold text-slate-800" %>
        </div>
      </div>

      <div class="space-y-1">
        <div class="flex items-center space-x-2">
          <%= render "shared/svgs/money" %>
          <%= content_tag :span, model_attribute(CashTransaction, :total_amount), class: "text-sm font-medium text-slate-500" %>
        </div>

        <div class="flex items-center">
          <%= content_tag :span, from_cent_based_to_float(category.cash_transactions_total, "R$"), class: "text-sm font-semibold text-slate-800 mr-auto" %>

          <%= link_to cash_transactions_path(category_id: category.id, format: :turbo_stream), class: "my-auto mt-[-1rem]", data: { turbo_frame: :center_container } do %>
            <%= render "shared/svgs/jump_to" %>
          <% end %>
        </div>
      </div>
    </div>

    <details>
      <%= content_tag :summary, t(:datatable_actions), class: "flex items-center justify-between py-2" %>

      <%= content_tag :div, class: "flex justify-between py-2" do %>
        <div class="flex items-center gap-3 ml-auto">
          <%= link_to edit_category_path(category), id: "edit_category_#{category.id}", data: { turbo_frame: :center_container } do %>
            <%= render "shared/svgs/pencil" %>
          <% end %>

          <%= link_to category, id: "delete_category_#{category.id}", data: { turbo_method: :delete } do %>
            <%= render "shared/svgs/rubbish" %>
          <% end %>
        </div>
      <% end %>
    </details>
  </div>
<% end %>
