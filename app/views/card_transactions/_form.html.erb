<%= turbo_frame_tag dom_id card_transaction do %>


  <% form_with(
       model: card_transaction, id: 'form',
       class: 'contents text-black',
       html: { data: { controller: 'form-validate' } }
  ) do |form| %>

    <% object = card_transaction %>

    <%= render 'layouts/shared/errors', object: %>

    <div class="flex space-x-12">
      <div class="flex w-2/3 flex-col gap-6 my-5">
        <%= render TextFieldComponent.new(form:, object:, field: :ct_description, options: { autofocus: true }) %>
      </div>

      <div class="flex w-1/3 flex-col gap-6 my-5">
        <%= render TextFieldComponent.new(form:, object:, field: :date, options: { type: 'date' }) %>
      </div>
    </div>

    <div class="flex space-x-12">
      <div class="flex w-2/3 flex-col gap-6 my-5">
        <%= render TextFieldComponent.new(form:, object:, field: :ct_comment) %>
      </div>

      <div class="flex w-1/3 flex-col gap-6 my-5">
        <%= render TextFieldComponent.new(form:, object:, field: :starting_price, options: { type: 'number', step: 0.01 }) %>
      </div>
    </div>

    <div class="flex space-x-12">
      <div class="flex w-1/4 flex-col gap-6 my-5">
        <%= render AutocompleteSelectComponent.new(form:, object:, field: :card_id, items: @user_cards) %>
      </div>

      <div class="flex w-1/4 flex-col gap-6 my-5">
        <%= render AutocompleteSelectComponent.new(form:, object:, field: :entity_id, items: @entities) %>
      </div>

      <div class="flex w-1/4 flex-col gap-6 my-5">
        <%= render AutocompleteSelectComponent.new(form:, object:, field: :category_id, items: @categories) %>
      </div>

      <div class="flex w-1/4 flex-col gap-6 my-5">
        <%= render AutocompleteSelectComponent.new(form:, object:, field: :category2_id, items: @categories) %> </div>
    </div>

    <!-- @TODO: Only one field that builds up a reference of MonthYear, possibly an AutoSelect, that gets defaulted -->
    <div class="flex space-x-12 justify-center">
      <div class="flex w-1/6 flex-col gap-6 my-5">
        <%= render TextFieldComponent.new(form:, object:, field: :month, options: { type: 'number', step: 1 }) %>
      </div>

      <div class="flex w-1/6 flex-col gap-6 my-5">
        <%= render TextFieldComponent.new(form:, object:, field: :year, options: { type: 'number', step: 1 }) %>
      </div>
    </div>

    <!--
        @TODO: Usage of stimulus to get the number of installments through an increment button. Installments nested fields appear

    <div class="flex w-72 flex-col gap-6 my-5">
      <%#= render TextFieldComponent.new(form:, object:, field: :installment_id, options: { type: 'number', step: 1 }) %>
    </div>

    <div class="flex w-72 flex-col gap-6 my-5">
      <%#= render TextFieldComponent.new(form:, object:, field: :installments_count, options: { type: 'number', step: 1 }) %>
    </div>
    -->

    <div class="inline">
      <%= render ButtonComponent.new(form:, options: { label: 'Create Card Transaction' }) %>
    </div>
  <% end %>
<% end %>
